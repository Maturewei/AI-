# 学习paddlehub和OCR

#### 介绍
完成AI达人创造营第二期最后一次作业

## 一、项目背景介绍
懒人打卡统计：用OCR+花名册一键统计打卡结果 出席各种会议或活动时均需要进行签到，有的时候是纸质的签到表，有时候则是APP打卡，之后再人工将签到信息填入EXCEL表格中。为了避免人工操作，可以通过PaddleHub调用OCR模型，一键识别照片或者截图中的签到人姓名，并且通过字符匹配的方式，找到excel表格中的签到人进行标注。
## 二、数据介绍

带文字图片生成来源：https://blog.csdn.net/sinat_29957455/article/details/105069917 CC 4.0 BY-SA simhei.ttf 从下述网址获得 http://www.font5.com.cn/font_download.php?id=151&part=1237887120
## 三、模型介绍
用错误打败错误 为了解决OCR识别模型将形近字误判从而导致无法正确生成签到电子记录的情况发生，可以通过以下步骤生成签到人的“伪姓名”从而使用“伪姓名”获得正确的匹配结果。

下表以“佘大”同学的签到检测作为示例：
![cda8f0d1878e4e678a828c13ca2c4505e8b76bc73b784de9a859200dcd3e9459.png](attachment:3c36d4d4-5304-4fd3-a40c-59794ce7203b.png)
可以看到通过这种生成“伪姓名”方式，就可以顺利地将“佘大”同学和签到表截图中地姓名匹配上啦~ 代码逻辑： 获取签到结果截图的OCR识别结果 获取花名册excel中第i个同学的姓名 通过上述方法生成“伪姓名” 将“伪姓名”和OCR识别结果匹配，若有匹配项，且签到标记存在，则对应同学签到成功，若否则签到失败 i=i+1, 跳到第2步执行
## 四、模型训练
参数设置：

```
img_dir='1.jpg'                        # 打卡截图
name_csv='name_csv.csv'        # 花名册文件，表头为(name,1,2,3,4,5,6,7...)，对应的内容分别为姓名，第一天的打卡结果，第二天的打卡结果...，其中姓名填入即可，其他方格可以留空
save_dir='output.csv'               # 打卡后的结果保存路径
block_size=25                          # 右上角的绿色对勾的区域大小
w_bias=35                                # 绿色对勾相对于姓名位置的横向偏移量
h_bias=-50                                # 绿色对勾相对于姓名位置的纵向偏移量
threshold=175                         # 阈值，低于此阈值则为绿色，否则则偏向于灰色，可以根据像素点均值进行分类
clock_in_col=1                          # 打卡条目，此处设为1对应第一天的打卡结果，结果会写入到第二行中
```
## 五、总结与升华
亮点：用OCR本身模型存在的缺点去掩盖其缺点，是一个非常好的思路。相信这个思路在解决其他问题的时候也可以借鉴并发展！
